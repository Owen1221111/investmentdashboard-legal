# 結構型商品明細功能說明

## 功能概述
在原有的月度資產明細、公司債明細和損益表的基礎上，在主要表格下方新增了獨立的「結構型明細」區塊，實現了結構型商品的完整管理功能。

## 主要特色

### 1. 雙區塊設計
- **進行中區塊**：顯示目前持有的結構型商品
- **已出場區塊**：顯示已經賣出的結構型商品

### 2. 進行中商品資訊
- 交易定價日
- 標的（如 TSM NVDA、TSM TSLA NVDA）
- 發行日
- 最終評價日
- 期間價格
- 執行價格
- 敲出障礙
- 敲入障礙
- 利率
- 月利率
- 交易金額
- 備註
- 出場操作按鈕

### 3. 已出場商品資訊
- 基本資訊（交易定價日、標的、發行日、最終評價日）
- 收益資訊（利率、月利率、實際收益率）
- 出場資訊（出場日、持有月份）
- 損益資訊（交易金額、實際收益）
- 備註

### 4. 出場功能
- 點擊「出場」按鈕開啟出場表單
- 輸入出場日期、出場金額、實際收益率
- 自動計算損益金額、損益百分比、持有月份
- 確認後將商品從「進行中」移動到「已出場」

## 技術實現

### 新增檔案
1. `Models/StructuredProduct.swift` - 結構型商品資料模型
2. `Views/Forms/ExitStructuredProductForm.swift` - 出場表單

### 修改檔案
1. `Views/Tables/MonthlyAssetTableView.swift` - 在主要表格下方添加結構型明細獨立區塊

### 資料模型特點
- 支援進行中/已出場狀態切換
- 自動計算損益和持有時間
- 完整的結構型商品屬性支援

### UI 設計特點
- 獨立的卡片式設計，與主要表格視覺分離
- 與現有表格風格一致的工具列和操作按鈕
- 響應式欄位寬度
- 顏色編碼（綠色代表盈利，紅色代表虧損）
- 進行中/已出場清楚分區顯示

## 使用方式

1. 在主要表格下方查看獨立的「結構型明細」區塊
2. 在「進行中」區塊查看目前持有的商品
3. 點擊「出場」按鈕進行出場操作
4. 填寫出場資訊後確認
5. 商品將自動移動到「已出場」區塊並記錄損益

## 範例資料
系統內建了範例資料，包括：
- 2 個進行中的結構型商品
- 2 個已出場的結構型商品（含損益記錄）

這個功能以獨立區塊的形式完全整合到原有的投資明細管理系統中，提供了完整的結構型商品生命週期管理，與主要表格形成清晰的功能分區。