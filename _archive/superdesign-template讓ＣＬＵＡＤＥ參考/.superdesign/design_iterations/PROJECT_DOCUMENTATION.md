# æŠ•è³‡å„€è¡¨æ¿å°ˆæ¡ˆæ–‡æª”
## å°ˆæ¡ˆæ¦‚è¿°
é€™æ˜¯ä¸€å€‹æŠ•è³‡ç†è²¡å„€è¡¨æ¿æ‡‰ç”¨ï¼Œç›®å‰å·²å®Œæˆ90%çš„Webç‰ˆæœ¬åŠŸèƒ½ï¼Œæº–å‚™è½‰ç§»åˆ°iOSåŸç”Ÿé–‹ç™¼ã€‚

---

## ğŸ¯ å°ˆæ¡ˆç›®æ¨™
- **ä¸»è¦ç”¨é€”**: å¤šå®¢æˆ¶æŠ•è³‡çµ„åˆç®¡ç†å’Œç›£æ§ç³»çµ±
- **ç›®æ¨™å¹³å°**: iOS (iPhone + iPad)
- **æ•¸æ“šå­˜å„²**: iCloud + CloudKit åŒæ­¥
- **è¨­è¨ˆç†å¿µ**: ç°¡æ½”ã€ç›´è§€ã€éŸ¿æ‡‰å¼
- **æŠ€è¡“æ£§**: å°‡å¾ HTML/JS/CSS è½‰æ›åˆ° SwiftUI + CloudKit

---

## ğŸ”„ æ ¸å¿ƒæ¥­å‹™æµç¨‹

### ä¸»è¦åŠŸèƒ½æµç¨‹
1. **å®¢æˆ¶é¸æ“‡**: é€éå·¦ä¸Šè§’æŒ‰éˆ•é¸æ“‡å®¢æˆ¶ â†’ åˆ‡æ›åˆ°è©²å®¢æˆ¶çš„å„€è¡¨æ¿
2. **æ•¸æ“šæ–°å¢**: é€éå³ä¸Šè§’æ–°å¢æŒ‰éˆ• â†’ è¼¸å…¥è³‡æ–™åˆ°æœˆåº¦è³‡ç”¢æ˜ç´°
3. **è‡ªå‹•æ›´æ–°**: æ‰€æœ‰å¡ç‰‡æ•¸å­—ã€ç·šåœ–ã€çµ±è¨ˆæœƒæ ¹æ“šæœˆåº¦è³‡ç”¢æ˜ç´°è‡ªå‹•é‡æ–°è¨ˆç®—

### æ•¸æ“šæµå‘
```
å®¢æˆ¶é¸æ“‡ â†’ è¼‰å…¥è©²å®¢æˆ¶è³‡æ–™ â†’ é¡¯ç¤ºå„€è¡¨æ¿
     â†“
æ–°å¢/ç·¨è¼¯æœˆåº¦è³‡ç”¢æ˜ç´° â†’ é‡æ–°è¨ˆç®—æ‰€æœ‰çµ±è¨ˆæ•¸æ“š â†’ æ›´æ–°æ‰€æœ‰å¡ç‰‡
     â†“
iCloud CloudKit è‡ªå‹•åŒæ­¥ â†’ å¤šè£ç½®æ•¸æ“šä¸€è‡´
```

---

## ğŸ“± ç•Œé¢æ¶æ§‹

### 1. é ‚éƒ¨å°èˆªæ¬„ (å›ºå®šä½ç½®)
**ä½ç½®**: å›ºå®šåœ¨é ‚ç«¯ï¼Œæ¯›ç»ç’ƒæ•ˆæœ
**é«˜åº¦**: 36px (æ¥µçª„è¨­è¨ˆ)
**åŠŸèƒ½æŒ‰éˆ•**:
- **å·¦å´**: ä¸‰æ¢æ§“æŒ‰éˆ• (**å®¢æˆ¶åˆ—è¡¨é¸æ“‡å™¨**) + æ’åºæŒ‰éˆ•
- **ä¸­é–“**: ä»˜è²»ç‰ˆç‹€æ…‹æé†’ (è—è‰²èƒŒæ™¯ï¼Œçš‡å† åœ–æ¨™)
- **å³å´**: **æ–°å¢è³‡æ–™æŒ‰éˆ•** (å¯«å…¥æœˆåº¦è³‡ç”¢æ˜ç´°)

### 2. ä¸»è¦çµ±è¨ˆå€åŸŸ
**è¨­è¨ˆ**: å¤§å‹å¡ç‰‡ï¼Œåœ“è§’20px
**å…§å®¹**:
- ç¸½è³‡ç”¢æ•¸å­— (å·¦å´ï¼Œå¤§å­—é«”)
- ç¸½æç›Š (+125,000 +1.25%)
- æ™‚é–“æŒ‰éˆ•çµ„ (1D, 7D, 1M, 3M, 1Y)
- å³å´çµ±è¨ˆå¡ç‰‡ç¾¤çµ„ (4å€‹å°å¡ç‰‡)
- åº•éƒ¨èµ°å‹¢åœ– (é€æ˜èƒŒæ™¯ï¼Œæ¼¸å±¤ç·šæ¢)

### 3. 6åˆ—å‹•æ…‹ä½ˆå±€å€åŸŸ
**Gridç³»çµ±**: 6åˆ—éŸ¿æ‡‰å¼ä½ˆå±€
**å¡ç‰‡é…ç½®**:

#### A. è³‡ç”¢é…ç½®å¡ç‰‡ (2x2) - å¯æ»‘å‹•
**4å€‹é é¢**:
1. **ç¸½è³‡ç”¢é…ç½®**: ç¾è‚¡45%ã€å‚µåˆ¸25%ã€ç¾é‡‘20%ã€å°è‚¡8%ã€çµæ§‹å‹2%
2. **ç¾è‚¡è©³ç´°**: AAPL 35%ã€MSFT 25%ã€GOOGL 20%ã€å…¶ä»–20%
3. **å‚µåˆ¸è©³ç´°**: æ”¿åºœå‚µ40%ã€å…¬å¸å‚µ35%ã€é«˜æ”¶ç›Šå‚µ25%
4. **å°è‚¡è©³ç´°**: å°ç©é›»30%ã€è¯ç™¼ç§‘25%ã€é´»æµ·20%ã€å…¶ä»–25%

**äº’å‹•åŠŸèƒ½**:
- è§¸æ§/æ»‘é¼ æ»‘å‹•åˆ‡æ›é é¢
- é ‚éƒ¨4å€‹æŒ‡ç¤ºå™¨åœ“é»
- æ¨™é¡Œè‡ªå‹•æ›´æ–°
- ä¸­å¿ƒåœ“åœˆé¡¯ç¤ºæœ€å¤§ä½”æ¯”é …ç›®

#### B. ç¾è‚¡æŠ•è³‡å¡ç‰‡ (2x1)
**å…§å®¹**: é‡‘é¡4,500,000ï¼Œå ±é…¬ç‡+12%ï¼Œå°å‹èµ°å‹¢åœ–

#### C. å‚µåˆ¸/å°è‚¡å¡ç‰‡ (2x1) - å¯æ»‘å‹•
**2å€‹é é¢**:
1. **å‚µåˆ¸**: 2,500,000ï¼Œ+3%å ±é…¬ç‡
2. **å°è‚¡**: 800,000ï¼Œ+8%å ±é…¬ç‡
**ç‰¹è‰²**: å·¦å³æ»‘å‹•åˆ‡æ›ï¼Œä¸åŒé¡è‰²ä¸»é¡Œ

#### D. å‚µåˆ¸é…æ¯åœ–è¡¨ (4x1)
**å…§å®¹**: 12å€‹æœˆé…æ¯é•·æ¢åœ–ï¼Œå¹´é…æ¯ç¸½é¡125,000

### 4. æ•´åˆå¼è¡¨æ ¼å€åŸŸ
**3å€‹åˆ†é **:
1. **æœˆåº¦è³‡ç”¢æ˜ç´°** (16æ¬„ä½): æ—¥æœŸã€ç¾é‡‘ã€ç¾è‚¡ã€å®šæœŸå®šé¡ã€å‚µåˆ¸ã€çµæ§‹å‹å•†å“ã€å°è‚¡ã€å°è‚¡æŠ˜åˆã€å·²ç¢ºåˆ©æ¯ã€åŒ¯å…¥ã€å„é¡æˆæœ¬ã€å‚™è¨»ã€ç¸½è³‡ç”¢
2. **å…¬å¸å‚µæ˜ç´°** (15æ¬„ä½): ç”³è³¼æ—¥ã€åç¨±ã€ç¥¨é¢åˆ©ç‡ã€æ®–åˆ©ç‡ã€ç”³è³¼åƒ¹ã€ç”³è³¼é‡‘é¡ã€æŒæœ‰é¢é¡ã€äº¤æ˜“é‡‘é¡ã€ç¾å€¼ã€å·²é ˜åˆ©æ¯ã€å«æ¯æç›Šã€å ±é…¬ç‡ã€é…æ¯æœˆä»½ã€å–®æ¬¡é…æ¯ã€å¹´åº¦é…æ¯
3. **æç›Šè¡¨**: äº¤æ˜“è¨˜éŒ„ç›¸é—œæ¬„ä½

**åŠŸèƒ½**: å·¥å…·åˆ—(æ’åºã€ä¸‹è¼‰ã€åˆªé™¤ã€ç·¨è¼¯)ã€æ°´å¹³æ»¾å‹•æ”¯æ´

---

## ğŸ¨ è¨­è¨ˆç³»çµ±

### é¡è‰²ä¸»é¡Œ
```css
--background: èƒŒæ™¯è‰²
--foreground: ä¸»æ–‡å­—è‰²
--card: å¡ç‰‡èƒŒæ™¯
--header-text: æ¨™é¡Œæ–‡å­—
--card-text-primary: å¡ç‰‡ä¸»è¦æ–‡å­—
--card-text-secondary: å¡ç‰‡æ¬¡è¦æ–‡å­—
--button-primary: ä¸»æŒ‰éˆ•è‰²
--profit-color: ç²åˆ©ç¶ è‰² (#34C759)
--loss-color: è™§æç´…è‰² (#FF3B30)
```

### å­—é«”ç³»çµ±
- **ä¸»å­—é«”**: Inter (Web) / SF Pro (iOS)
- **éšå±¤**: 3XL (ç¸½è³‡ç”¢) â†’ XL (å¡ç‰‡æ•¸å­—) â†’ Base (æ¨™é¡Œ) â†’ SM/XS (å…§å®¹)

### åœ“è§’è¦ç¯„
- **å¤§å¡ç‰‡**: 20px
- **ä¸­å¡ç‰‡**: 16px  
- **å°å…ƒç´ **: 8px
- **æŒ‰éˆ•**: 8px

### é™°å½±ç³»çµ±
- **å¡ç‰‡é™°å½±**: è¼•å¾®é™°å½±
- **æ‡¸åœæ•ˆæœ**: transform: scale(1.02)
- **æŒ‰éˆ•åé¥‹**: activeç‹€æ…‹ç¸®æ”¾

---

## ğŸ”§ äº’å‹•åŠŸèƒ½

### æ»‘å‹•æ©Ÿåˆ¶
1. **è³‡ç”¢é…ç½®å¡ç‰‡**: 4é æ©«å‘æ»‘å‹•ï¼ŒæŒ‡ç¤ºå™¨åé¥‹
2. **å‚µåˆ¸/å°è‚¡å¡ç‰‡**: 2é æ©«å‘æ»‘å‹•ï¼Œç„¡æŒ‡ç¤ºå™¨
3. **è§¸æ§æ”¯æ´**: 50pxæœ€å°æ»‘å‹•è·é›¢
4. **å‹•ç•«**: 300msç·©å…¥ç·©å‡º

### æŒ‰éˆ•åŠŸèƒ½ (ç›®å‰placeholder)
- å®¢æˆ¶åˆ—è¡¨ã€æ’åºã€æ–°å¢è³‡æ–™
- è¡¨æ ¼æ“ä½œå·¥å…·
- æ™‚é–“ç¯„åœåˆ‡æ›

### è¡¨æ ¼åˆ‡æ›
- Tabå¼åˆ‡æ›ç•Œé¢
- å…§å®¹å€åŸŸæ·¡å…¥å‹•ç•«
- æ¨™é¡Œè‡ªå‹•æ›´æ–°

---

## ğŸ“Š æ•¸æ“šçµæ§‹

### è³‡ç”¢æ•¸æ“š
```json
{
  "totalAssets": 10000000,
  "totalPnL": { "amount": 125000, "percentage": 1.25 },
  "allocation": {
    "usStock": 45,
    "bonds": 25, 
    "cash": 20,
    "twStock": 8,
    "structured": 2
  }
}
```

### åœ–è¡¨æ•¸æ“š
- **åœ“é¤…åœ–**: Chart.js doughnutï¼Œ65%å…§åœˆ
- **ç·šåœ–**: SVGç¹ªè£½ï¼Œæ¼¸å±¤å¡«å……
- **é•·æ¢åœ–**: 12å€‹æœˆæ•¸æ“šé»

---

## ğŸ¯ è½‰ç§»åˆ°iOSçš„é‡é»

### SwiftUIçµ„ä»¶å°æ‡‰
1. **LazyVGrid(columns: 6)** â†’ 6åˆ—ä½ˆå±€
2. **TabView** â†’ æ»‘å‹•é é¢
3. **Swift Charts** â†’ åœ–è¡¨åº«
4. **ScrollView + LazyVStack** â†’ è¡¨æ ¼
5. **Gesture** â†’ æ»‘å‹•æ‰‹å‹¢

### éŸ¿æ‡‰å¼è¨­è¨ˆ
- **iPad**: ä¿æŒ6åˆ—ä½ˆå±€
- **iPhone**: æ”¹ç‚ºå †ç–Šä½ˆå±€
- **é©é…**: ä½¿ç”¨ @Environment(\.horizontalSizeClass)

### æ•¸æ“šç®¡ç†
- **CloudKit** â†’ iCloud æ•¸æ“šåŒæ­¥
- **ObservableObject** â†’ è³‡æ–™ç‹€æ…‹ç®¡ç†
- **@State/@Binding** â†’ UIç‹€æ…‹
- **@Published** â†’ éŸ¿æ‡‰å¼æ•¸æ“šæ›´æ–°

---

## ğŸ’¾ æ•¸æ“šæ¶æ§‹ (CloudKit)

### æ ¸å¿ƒæ•¸æ“šæ¨¡å‹
```swift
// Client (å®¢æˆ¶)
struct Client {
    var id: String
    var name: String
    var createdDate: Date
    var lastUpdated: Date
}

// MonthlyAssetRecord (æœˆåº¦è³‡ç”¢æ˜ç´°) - ä¸»è¦æ•¸æ“šè¡¨
struct MonthlyAssetRecord {
    var id: String
    var clientID: String  // é—œè¯å®¢æˆ¶
    var date: Date
    var cash: Double      // ç¾é‡‘
    var usStock: Double   // ç¾è‚¡
    var regularInvestment: Double // å®šæœŸå®šé¡
    var bonds: Double     // å‚µåˆ¸
    var structuredProducts: Double // çµæ§‹å‹å•†å“
    var twStock: Double   // å°è‚¡
    var twStockConverted: Double // å°è‚¡æŠ˜åˆ
    var confirmedInterest: Double // å·²ç¢ºåˆ©æ¯
    var deposit: Double   // åŒ¯å…¥
    // ... å…¶ä»–æˆæœ¬æ¬„ä½
}

// è¨ˆç®—å±¬æ€§ (å¾æœˆåº¦è³‡ç”¢æ˜ç´°è¡ç”Ÿ)
struct CalculatedMetrics {
    var totalAssets: Double
    var totalPnL: Double
    var allocationPercentages: [String: Double]
    var chartData: [ChartDataPoint]
}
```

### æ¥­å‹™é‚è¼¯æœå‹™
```swift
class CalculationService {
    // å¾æœˆåº¦è³‡ç”¢æ˜ç´°è¨ˆç®—ç¸½è³‡ç”¢
    func calculateTotalAssets(from records: [MonthlyAssetRecord]) -> Double
    
    // è¨ˆç®—å„è³‡ç”¢é…ç½®ç™¾åˆ†æ¯”
    func calculateAllocation(from records: [MonthlyAssetRecord]) -> [String: Double]
    
    // ç”Ÿæˆåœ–è¡¨æ•¸æ“š
    func generateChartData(from records: [MonthlyAssetRecord]) -> [ChartDataPoint]
}
```

---

## ğŸ“ æª”æ¡ˆçµæ§‹å»ºè­°

```
InvestmentDashboard/
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ ClientSelection/
â”‚   â”‚   â”œâ”€â”€ ClientListView.swift
â”‚   â”‚   â””â”€â”€ ClientPickerView.swift
â”‚   â”œâ”€â”€ Dashboard/
â”‚   â”‚   â”œâ”€â”€ MainDashboardView.swift
â”‚   â”‚   â”œâ”€â”€ AssetAllocationCard.swift
â”‚   â”‚   â”œâ”€â”€ BondStockCard.swift
â”‚   â”‚   â””â”€â”€ DataTableView.swift
â”‚   â”œâ”€â”€ DataEntry/
â”‚   â”‚   â””â”€â”€ AddDataView.swift
â”‚   â””â”€â”€ Components/
â”‚       â””â”€â”€ TopNavigationView.swift
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ Client.swift
â”‚   â”œâ”€â”€ MonthlyAssetRecord.swift
â”‚   â””â”€â”€ CalculatedMetrics.swift
â”œâ”€â”€ ViewModels/
â”‚   â”œâ”€â”€ ClientViewModel.swift
â”‚   â”œâ”€â”€ DashboardViewModel.swift
â”‚   â””â”€â”€ DataEntryViewModel.swift
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ CloudKitService.swift
â”‚   â””â”€â”€ CalculationService.swift
â””â”€â”€ Resources/
    â””â”€â”€ Colors.xcassets
```

---

## ğŸš€ é–‹ç™¼å„ªå…ˆç´š

### Phase 1: åŸºç¤æ¶æ§‹ + CloudKit
1. å»ºç«‹SwiftUIå°ˆæ¡ˆ + CloudKitå®¹å™¨
2. è¨­è¨ˆæ•¸æ“šæ¨¡å‹ (Client, MonthlyAssetRecord)
3. CloudKitService åŸºç¤å¯¦ç¾
4. å®¢æˆ¶é¸æ“‡ç•Œé¢

### Phase 2: æ•¸æ“šè¼¸å…¥ç³»çµ±
1. æ–°å¢è³‡æ–™è¡¨å–® (AddDataView)
2. æœˆåº¦è³‡ç”¢æ˜ç´° CRUD æ“ä½œ
3. è³‡æ–™é©—è­‰å’ŒéŒ¯èª¤è™•ç†
4. iCloud åŒæ­¥æ¸¬è©¦

### Phase 3: å„€è¡¨æ¿æ ¸å¿ƒ
1. æ•¸æ“šè¨ˆç®—æœå‹™ (CalculationService)
2. ä¸»è¦çµ±è¨ˆå€åŸŸ (è‡ªå‹•è¨ˆç®—ç¸½è³‡ç”¢ã€æç›Š)
3. è³‡ç”¢é…ç½®æ»‘å‹•å¡ç‰‡ (å¾æ•¸æ“šè¨ˆç®—ç™¾åˆ†æ¯”)
4. åœ–è¡¨æ•´åˆ (Swift Charts)

### Phase 4: é€²éšåŠŸèƒ½
1. å‚µåˆ¸/å°è‚¡æ»‘å‹•å¡ç‰‡
2. è¡¨æ ¼è¦–åœ– (æœˆåº¦è³‡ç”¢æ˜ç´°é¡¯ç¤º)
3. éŸ¿æ‡‰å¼é©é… (iPad/iPhone)
4. å‹•ç•«å’Œæ‰‹å‹¢å„ªåŒ–

### Phase 5: å®Œå–„èˆ‡å„ªåŒ–
1. é›¢ç·šæ•¸æ“šç·©å­˜
2. æ•¸æ“šå‚™ä»½/åŒ¯å‡º
3. ä½¿ç”¨è€…é«”é©—å„ªåŒ–
4. æ•ˆèƒ½èª¿å„ª

---

## ğŸ’¡ æŠ€è¡“è€ƒé‡

### æ•ˆèƒ½å„ªåŒ–
- LazyVGridæ‡¶è¼‰å…¥
- åœ–è¡¨æ•¸æ“šå¿«å–
- æ»‘å‹•å‹•ç•«å„ªåŒ–

### ä½¿ç”¨è€…é«”é©—
- è§¸è¦ºåé¥‹ (Haptic Feedback)
- è¼‰å…¥ç‹€æ…‹æŒ‡ç¤º
- éŒ¯èª¤ç‹€æ…‹è™•ç†

### å¯æ“´å±•æ€§
- æ¨¡çµ„åŒ–çµ„ä»¶è¨­è¨ˆ
- ä¸»é¡Œç³»çµ±
- å¤šèªè¨€æ”¯æ´æº–å‚™

---

## ğŸ“‹ ç•¶å‰ç‹€æ…‹æª¢æŸ¥æ¸…å–®

- âœ… ç•Œé¢è¨­è¨ˆå®Œæˆ (90%)
- âœ… æ»‘å‹•äº’å‹•å¯¦ç¾
- âœ… éŸ¿æ‡‰å¼ä½ˆå±€
- âœ… è¡¨æ ¼æ•¸æ“šçµæ§‹
- â³ å¾Œç«¯æ•¸æ“šé€£æ¥
- â³ iOSåŸç”Ÿè½‰æ›
- â³ ä½¿ç”¨è€…èªè­‰
- â³ æ•¸æ“šæŒä¹…åŒ–

---

**å‚™è¨»**: é€™ä»½æ–‡æª”æ‡‰è©²æä¾›çµ¦Claude Codeä½œç‚ºå°ˆæ¡ˆèƒŒæ™¯ï¼Œè®“å®ƒèƒ½å¤ ç†è§£ç›®å‰çš„é€²åº¦ä¸¦ç¹¼çºŒiOSé–‹ç™¼å·¥ä½œã€‚